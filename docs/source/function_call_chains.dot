digraph function_call_chains {
    graph [rankdir="LR"]

    /* Cluster Types
        `penwidth=5`
        Class: `style="rounded"`
        Tests: `style="dashed"`

        Relation: `color="#ceb888"` (Gold)
        Blueprint: `color="#782f40"` (Garnet)
        Module collecting general functions: `color="#5cb8b2"`
    */

    node [  // To remove the fill color from the individual function nodes
        style="filled"
        fillcolor="white"
    ]
    /* Node Types
        When multiple adjustments are present, order is label, style, shape

        Test function: `style="dashed"`
        Fixture function: `style="dotted"`

        Route functions: `shape="cds"`
        Function connecting to S3: `shape="folder"`
        Function connecting to MySQL: `shape="cylinder"`
        Other functions: `shape="box"`
    */

    /*
        Edges represent function calls
            Edges are instantiated under the cluster containing the calling function
            Edges go from the calling function to the called function
        Function calls include
            Redirects between Flask routes via `url_for()`
            Calls to a Flask route function with the Flask test client (these use the URL in the decorator, not the function name)
        Function calls don't include calls to SQLAlchemy engines purely for the purpose of passing to another function
    */

    subgraph cluster_PATH_TO_CREDENTIALS_FILE {
        label="nolcat.models.PATH_TO_CREDENTIALS_FILE"
        // Moved to start because it's at the beginning of the "nolcat.models" file
        penwidth=5

        PATH_TO_CREDENTIALS_FILE [shape="box"]
    }


    subgraph cluster_fiscalYears {
        label="nolcat.models.fiscalYears"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_fiscalYears [
            label="state_data_types"
            shape="box"
        ]
        calculate_depreciated_ACRL_60b [shape="box"]
        calculate_depreciated_ACRL_63 [shape="box"]
        calculate_ACRL_61a [shape="box"]
        calculate_ACRL_61b [shape="box"]
        calculate_ARL_18 [shape="box"]
        calculate_ARL_19 [shape="box"]
        calculate_ARL_20 [shape="box"]
        create_usage_tracking_records_for_fiscal_year [shape="box"]
        collect_fiscal_year_usage_statistics [shape="box"]
    }


    subgraph cluster_annualStatistics {
        label="nolcat.models.annualStatistics"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_annualStatistics [
            label="state_data_types"
            shape="box"
        ]
        add_annual_statistic_value [shape="box"]
    }


    subgraph cluster_vendors {
        label="nolcat.models.vendors"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_vendors [
            label="state_data_types"
            shape="box"
        ]
        get_statisticsSources_records [shape="box"]
        get_resourceSources_records [shape="box"]
        add_note_in_vendors [
            label="add_note"
            shape="box"
        ]
    }


    subgraph cluster_vendorNotes {
        label="nolcat.models.vendorNotes"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_vendorNotes [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_statisticsSources {
        label="nolcat.models.statisticsSources"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_statisticsSources [
            label="state_data_types"
            shape="box"
        ]
        fetch_SUSHI_information [shape="box"]
        _harvest_R5_SUSHI [shape="box"]
        _harvest_single_report [shape="box"]
        _check_if_data_in_database [shape="box"]
        collect_usage_statistics [shape="box"]
        add_note_in_statisticsSources [
            label="add_note"
            shape="box"
        ]
    }


    subgraph cluster_statisticsSourceNotes {
        label="nolcat.models.statisticsSourceNotes"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_statisticsSourceNotes [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_resourceSources {
        label="nolcat.models.resourceSources"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_resourceSources [
            label="state_data_types"
            shape="box"
        ]
        add_access_stop_date [shape="box"]
        remove_access_stop_date [shape="box"]
        change_StatisticsSource [shape="box"]
        add_note_in_resourceSources [
            label="add_note"
            shape="box"
        ]
    }


    subgraph cluster_resourceSourceNotes {
        label="nolcat.models.resourceSourceNotes"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_resourceSourceNotes [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_statisticsResourceSources {
        label="nolcat.models.statisticsResourceSources"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_statisticsResourceSources [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_annualUsageCollectionTracking {
        label="nolcat.models.annualUsageCollectionTracking"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_annualUsageCollectionTracking [
            label="state_data_types"
            shape="box"
        ]
        collect_annual_usage_statistics [shape="box"]
        upload_nonstandard_usage_file [shape="box"]
        download_nonstandard_usage_file [shape="folder"]
    }


    subgraph cluster_COUNTERData {
        label="nolcat.models.COUNTERData"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_COUNTERData [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_SUSHICallAndResponse {
        label="nolcat.SUSHICallAndResponse"
        penwidth=5
        style="rounded"

        make_SUSHI_call [shape="box"]
        _make_API_call [shape="box"]
        _convert_Response_to_JSON [shape="box"]
        _save_raw_Response_text [shape="box"]
        _handle_SUSHI_exceptions [shape="box"]
        _evaluate_individual_SUSHI_exception [shape="box"]
        _stdout_API_response_based_on_size [shape="box"]
    }


    subgraph cluster_UploadCOUNTERReports {
        label="nolcat.UploadCOUNTERReports"
        penwidth=5
        style="rounded"

        create_dataframe_in_UploadCOUNTERReports [
            label="create_dataframe"
            shape="box"
        ]
    }


    subgraph cluster_ConvertJSONDictToDataframe {
        label="nolcat.ConvertJSONDictToDataframe"
        penwidth=5
        style="rounded"

        create_dataframe_in_ConvertJSONDictToDataframe [
            label="create_dataframe"
            shape="box"
        ]
        _transform_R5_JSON [shape="box"]
        _transform_R5b1_JSON [shape="box"]
        _serialize_dates [shape="box"]
    }


    subgraph cluster_annual_stats {
        label="nolcat.annual_stats"
        penwidth=5
        color="#782f40"

        annual_stats_homepage [shape="cds"]
        show_fiscal_year_details [shape="cds"]
    }


    subgraph cluster_ingest_usage {
        label="nolcat.ingest_usage"
        penwidth=5
        color="#782f40"

        ingest_usage_homepage [shape="cds"]
        upload_COUNTER_data [shape="cds"]
        harvest_SUSHI_statistics [shape="cds"]
        upload_non_COUNTER_reports [shape="cds"]
    }


    subgraph cluster_initialization {
        label="nolcat.initialization"
        penwidth=5
        color="#782f40"

        collect_FY_and_vendor_data [shape="cds"]
        collect_sources_data [shape="cds"]
        collect_AUCT_and_historical_COUNTER_data [shape="cds"]
        upload_historical_non_COUNTER_usage [shape="cds"]
        data_load_complete [shape="cds"]
    }


    subgraph cluster_login {
        label="nolcat.login"
        penwidth=5
        color="#782f40"

        login_homepage [shape="cds"]
    }


    subgraph cluster_view_lists {
        label="nolcat.view_lists"
        penwidth=5
        color="#782f40"

        view_lists_homepage [shape="cds"]
        view_list_record [shape="cds"]
        edit_list_record [shape="cds"]
    }


    subgraph cluster_view_usage {
        label="nolcat.view_usage"
        penwidth=5
        color="#782f40"

        create_COUNTER_fixed_vocab_list [shape="box"]
        set_encoding [shape="box"]
        create_downloads_folder [shape="box"]
        view_usage_homepage [shape="cds"]
        run_custom_SQL_query [shape="cds"]
        use_predefined_SQL_query [shape="cds"]
        start_query_wizard [shape="cds"]
        query_wizard_sort_redirect [shape="cds"]
        construct_PR_query_with_wizard [shape="cds"]
        construct_DR_query_with_wizard [shape="cds"]
        construct_TR_query_with_wizard [shape="cds"]
        construct_IR_query_with_wizard [shape="cds"]
        download_non_COUNTER_usage [shape="cds"]
    }


    subgraph cluster_app {
        label="nolcat.app"
        penwidth=5
        color="#5cb8b2"

        filter_empty_parentheses [shape="box"]
        configure_logging [shape="box"]
        page_not_found [shape="box"]
        internal_server_error [shape="box"]
        create_app [shape="box"]
        "create_app.create_db" [shape="box"]
        "create_app.homepage" [shape="cds"]
        "create_app.download_file" [shape="cds"]
        last_day_of_month [shape="box"]
        first_new_PK_value [shape="box"]
        return_string_of_dataframe_info [shape="box"]
        change_single_field_dataframe_into_series [shape="box"]
        restore_boolean_values_to_boolean_field [shape="box"]
        upload_file_to_S3_bucket [shape="folder"]
        create_AUCT_SelectField_options [shape="box"]
        load_data_into_database [shape="cylinder"]
        query_database [shape="cylinder"]
        check_if_data_already_in_COUNTERData [shape="box"]
        truncate_longer_lines [shape="box"]
        update_database [shape="cylinder"]
        save_unconverted_data_via_upload [shape="box"]
        ISSN_regex [shape="box"]
        ISBN_regex [shape="box"]
        extract_value_from_single_value_df [shape="box"]
        AWS_timestamp_format [shape="box"]
        non_COUNTER_file_name_regex [shape="box"]
        empty_string_regex [shape="box"]
    }


    subgraph cluster_statements {
        label="nolcat.statements"
        penwidth=5
        color="#5cb8b2"

        file_extensions_and_mimetypes [shape="box"]
        format_list_for_stdout [shape="box"]
        remove_IDE_spacing_from_statement [shape="box"]
        initialize_relation_class_object_statement [shape="box"]
        fixture_variable_value_declaration_statement [shape="box"]
        unable_to_convert_SUSHI_data_to_dataframe_statement [shape="box"]
        unable_to_get_updated_primary_key_values_statement [shape="box"]
        Flask_error_statement [shape="box"]
        file_IO_statement [shape="box"]
        list_folder_contents_statement [shape="box"]
        check_if_file_exists_statement [shape="box"]
        failed_upload_to_S3_statement [shape="box"]
        unable_to_delete_test_file_in_S3_statement [shape="box"]
        upload_file_to_S3_bucket_success_regex [shape="box"]
        upload_nonstandard_usage_file_success_regex [shape="box"]
        return_value_from_query_statement [shape="box"]
        return_dataframe_from_query_statement [shape="box"]
        database_query_fail_statement [shape="box"]
        database_update_fail_statement [shape="box"]
        add_data_success_and_update_database_fail_statement [shape="box"]
        database_function_skip_statements [shape="box"]
        load_data_into_database_success_regex [shape="box"]
        update_database_success_regex [shape="box"]
        successful_SUSHI_call_statement [shape="box"]
        harvest_R5_SUSHI_success_statement [shape="box"]
        failed_SUSHI_call_statement [shape="box"]
        no_data_returned_by_SUSHI_statement [shape="box"]
        attempted_SUSHI_call_with_invalid_dates_statement [shape="box"]
        reports_with_no_usage_regex [shape="box"]
        skip_test_due_to_SUSHI_error_regex [shape="box"]
    }


    subgraph cluster_relations {
        label="tests.data.relations"
        penwidth=5
        color="#5cb8b2"

        fiscalYears_relation_in_relations [
            label="fiscalYears_relation"
            shape="box"
        ]
        annualStatistics_relation_in_relations [
            label="annualStatistics_relation"
            shape="box"
        ]
        vendors_relation_in_relations [
            label="vendors_relation"
            shape="box"
        ]
        vendorNotes_relation_in_relations [
            label="vendorNotes_relation"
            shape="box"
        ]
        statisticsSources_relation_in_relations [
            label="statisticsSources_relation"
            shape="box"
        ]
        statisticsSourceNotes_relation_in_relations [
            label="statisticsSourceNotes_relation"
            shape="box"
        ]
        resourceSources_relation_in_relations [
            label="resourceSources_relation"
            shape="box"
        ]
        resourceSourceNotes_relation_in_relations [
            label="resourceSourceNotes_relation"
            shape="box"
        ]
        statisticsResourceSources_relation_in_relations [
            label="statisticsResourceSources_relation"
            shape="box"
        ]
        annualUsageCollectionTracking_relation_in_relations [
            label="annualUsageCollectionTracking_relation"
            shape="box"
        ]
        workbook_0_2017_relation_in_relations [
            label="workbook_0_2017_relation"
            shape="box"
        ]
        workbook_1_2017_relation_in_relations [
            label="workbook_1_2017_relation"
            shape="box"
        ]
        workbook_2_2017_relation_in_relations [
            label="workbook_2_2017_relation"
            shape="box"
        ]
        workbook_0_2018_relation_in_relations [
            label="workbook_0_2018_relation"
            shape="box"
        ]
        workbook_1_2018_relation_in_relations [
            label="workbook_1_2018_relation"
            shape="box"
        ]
        workbook_2_2018_relation_in_relations [
            label="workbook_2_2018_relation"
            shape="box"
        ]
        workbook_0_2019_relation_in_relations [
            label="workbook_0_2019_relation"
            shape="box"
        ]
        workbook_1_2019_relation_in_relations [
            label="workbook_1_2019_relation"
            shape="box"
        ]
        workbook_2_2019_relation_in_relations [
            label="workbook_2_2019_relation"
            shape="box"
        ]
        workbook_3_2019_relation_in_relations [
            label="workbook_3_2019_relation"
            shape="box"
        ]
        workbook_0_2020_relation_in_relations [
            label="workbook_0_2020_relation"
            shape="box"
        ]
        workbook_1_2020_relation_in_relations [
            label="workbook_1_2020_relation"
            shape="box"
        ]
        workbook_2_2020_relation_in_relations [
            label="workbook_2_2020_relation"
            shape="box"
        ]
        workbook_3_2020_relation_in_relations [
            label="workbook_3_2020_relation"
            shape="box"
        ]
    }


    subgraph cluster_conftest {
        label="tests.conftest"
        penwidth=5
        style="dashed"
        color="#5cb8b2"

        engine [
            style="dotted"
            shape="cylinder"
        ]
        app [
            style="dotted"
            shape="box"
        ]
        client [
            style="dotted"
            shape="box"
        ]
        db [
            style="dotted"
            shape="box"
        ]
        session [
            style="dotted"
            shape="box"
        ]
        fiscalYears_relation_in_conftest [
            label="fiscalYears_relation"
            style="dotted"
            shape="box"
        ]
        annualStatistics_relation_in_conftest [
            label="annualStatistics_relation"
            style="dotted"
            shape="box"
        ]
        vendors_relation_in_conftest [
            label="vendors_relation"
            style="dotted"
            shape="box"
        ]
        vendorNotes_relation_in_conftest [
            label="vendorNotes_relation"
            style="dotted"
            shape="box"
        ]
        statisticsSources_relation_in_conftest [
            label="statisticsSources_relation"
            style="dotted"
            shape="box"
        ]
        statisticsSourceNotes_relation_in_conftest [
            label="statisticsSourceNotes_relation"
            style="dotted"
            shape="box"
        ]
        resourceSources_relation_in_conftest [
            label="resourceSources_relation"
            style="dotted"
            shape="box"
        ]
        resourceSourceNotes_relation_in_conftest [
            label="resourceSourceNotes_relation"
            style="dotted"
            shape="box"
        ]
        statisticsResourceSources_relation_in_conftest [
            label="statisticsResourceSources_relation"
            style="dotted"
            shape="box"
        ]
        annualUsageCollectionTracking_relation_in_conftest [
            label="annualUsageCollectionTracking_relation"
            style="dotted"
            shape="box"
        ]
        workbook_0_2017_relation_in_conftest [
            label="workbook_0_2017_relation"
            style="dotted"
            shape="box"
        ]
        workbook_1_2017_relation_in_conftest [
            label="workbook_1_2017_relation"
            style="dotted"
            shape="box"
        ]
        workbook_2_2017_relation_in_conftest [
            label="workbook_2_2017_relation"
            style="dotted"
            shape="box"
        ]
        workbook_0_2018_relation_in_conftest [
            label="workbook_0_2018_relation"
            style="dotted"
            shape="box"
        ]
        workbook_1_2018_relation_in_conftest [
            label="workbook_1_2018_relation"
            style="dotted"
            shape="box"
        ]
        workbook_2_2018_relation_in_conftest [
            label="workbook_2_2018_relation"
            style="dotted"
            shape="box"
        ]
        workbook_0_2019_relation_in_conftest [
            label="workbook_0_2019_relation"
            style="dotted"
            shape="box"
        ]
        workbook_1_2019_relation_in_conftest [
            label="workbook_1_2019_relation"
            style="dotted"
            shape="box"
        ]
        workbook_2_2019_relation_in_conftest [
            label="workbook_2_2019_relation"
            style="dotted"
            shape="box"
        ]
        workbook_3_2019_relation_in_conftest [
            label="workbook_3_2019_relation"
            style="dotted"
            shape="box"
        ]
        workbook_0_2020_relation_in_conftest [
            label="workbook_0_2020_relation"
            style="dotted"
            shape="box"
        ]
        workbook_1_2020_relation_in_conftest [
            label="workbook_1_2020_relation"
            style="dotted"
            shape="box"
        ]
        workbook_2_2020_relation_in_conftest [
            label="workbook_2_2020_relation"
            style="dotted"
            shape="box"
        ]
        workbook_3_2020_relation_in_conftest [
            label="workbook_3_2020_relation"
            style="dotted"
            shape="box"
        ]
        workbooks_and_relations [
            style="dotted"
            shape="box"
        ]
        create_COUNTERData_workbook_iterdir_list [
            style="dotted"
            shape="box"
        ]
        COUNTERData_relation [
            style="dotted"
            shape="box"
        ]
        download_destination [
            style="dotted"
            shape="box"
        ]
        path_to_sample_file [
            style="dotted"
            shape="box"
        ]
        remove_file_from_S3 [
            style="dotted"
            shape="folder"
        ]
        non_COUNTER_AUCT_object_before_upload [
            style="dotted"
            shape="folder"
        ]
        non_COUNTER_AUCT_object_after_upload [
            style="dotted"
            shape="box"
        ]
        non_COUNTER_file_to_download_from_S3 [
            style="dotted"
            shape="folder"
        ]
        header_value [
            style="dotted"
            shape="box"
        ]
        most_recent_month_with_usage [
            style="dotted"
            shape="box"
        ]
        match_direct_SUSHI_harvest_result [
            style="dotted"
            shape="box"
        ]
        COUNTER_reports_offered_by_statistics_source [
            style="dotted"
            shape="box"
        ]
        prepare_HTML_page_for_comparison [
            style="dotted"
            shape="box"
        ]
    }


    subgraph cluster_test_AnnualStatistics {
        label="tests.test_AnnualStatistics"
        penwidth=5
        style="dashed"
        color="#ceb888"

        test_add_annual_statistic_value [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_AnnualUsageCollectionTracking {
        label="tests.test_AnnualUsageCollectionTracking"
        penwidth=5
        style="dashed"
        color="#ceb888"

        AUCT_fixture_for_SUSHI [
            style="dotted"
            shape="box"
        ]
        harvest_R5_SUSHI_result_in_test_AnnualUsageCollectionTracking [
            label="harvest_R5_SUSHI_result"
            style="dotted"
            shape="folder"
        ]
        test_collect_annual_usage_statistics [
            style="dashed"
            shape="box"
        ]
        sample_FileStorage_object [
            style="dotted"
            shape="box"
        ]
        test_upload_nonstandard_usage_file [
            style="dashed"
            shape="folder"
        ]
        test_download_nonstandard_usage_file [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_app {
        label="tests.test_app"
        penwidth=5
        style="dashed"
        color="#5cb8b2"

        test_flask_app_creation [
            style="dashed"
            shape="box"
        ]
        test_flask_client_creation [
            style="dashed"
            shape="box"
        ]
        test_SQLAlchemy_engine_creation [
            style="dashed"
            shape="box"
        ]
        test_homepage [
            style="dashed"
            shape="box"
        ]
        test_404_page [
            style="dashed"
            shape="box"
        ]
        test_load_data_into_database [
            style="dashed"
            shape="box"
        ]
        test_query_database [
            style="dashed"
            shape="box"
        ]
        test_loading_connected_data_into_other_relation [
            style="dashed"
            shape="box"
        ]
        test_download_file [
            style="dashed"
            shape="box"
        ]
        test_first_new_PK_value [
            style="dashed"
            shape="box"
        ]
        test_change_single_field_dataframe_into_series [
            style="dashed"
            shape="box"
        ]
        test_restore_boolean_values_to_boolean_field [
            style="dashed"
            shape="box"
        ]
        test_upload_file_to_S3_bucket [
            style="dashed"
            shape="folder"
        ]
        test_create_AUCT_SelectField_options [
            style="dashed"
            shape="box"
        ]
        test_truncate_longer_lines [
            style="dashed"
            shape="box"
        ]
        vendors_relation_after_test_update_database [
            style="dotted"
            shape="box"
        ]
        test_update_database [
            style="dashed"
            shape="box"
        ]
        vendors_relation_after_test_update_database_with_insert_statement [
            style="dotted"
            shape="box"
        ]
        test_update_database_with_insert_statement [
            style="dashed"
            shape="box"
        ]
        test_prepare_HTML_page_for_comparison [
            style="dashed"
            shape="box"
        ]
        file_name_stem_and_data [
            style="dotted"
            shape="folder"
        ]
        test_save_unconverted_data_via_upload [
            style="dashed"
            shape="folder"
        ]
        test_ISSN_regex [
            style="dashed"
            shape="box"
        ]
        test_ISBN_regex [
            style="dashed"
            shape="box"
        ]
        test_last_day_of_month [
            style="dashed"
            shape="box"
        ]
        test_extract_value_from_single_value_df [
            style="dashed"
            shape="box"
        ]
        test_AWS_timestamp_format [
            style="dashed"
            shape="box"
        ]
        test_non_COUNTER_file_name_regex [
            style="dashed"
            shape="box"
        ]
        test_empty_string_regex [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_bp_annual_stats {
        label="tests.test_bp_annual_stats"
        penwidth=5
        style="dashed"
        color="#782f40"

        test_GET_request_for_annual_stats_homepage [
            style="dashed"
            shape="box"
        ]
        test_GET_request_for_show_fiscal_year_details [
            style="dashed"
            shape="box"
        ]
        test_show_fiscal_year_details_submitting_RunAnnualStatsMethodsForm [
            style="dashed"
            shape="box"
        ]
        test_show_fiscal_year_details_submitting_EditFiscalYearForm [
            style="dashed"
            shape="box"
        ]
        test_show_fiscal_year_details_submitting_EditAUCTForm [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_bp_ingest_usage {
        label="tests.test_bp_ingest_usage"
        penwidth=5
        style="dashed"
        color="#782f40"

        test_ingest_usage_homepage [
            style="dashed"
            shape="box"
        ]
        test_upload_COUNTER_data_via_Excel [
            style="dashed"
            shape="box"
        ]
        test_upload_COUNTER_data_via_SQL_insert [
            style="dashed"
            shape="box"
        ]
        test_match_direct_SUSHI_harvest_result [
            style="dashed"
            shape="box"
        ]
        test_GET_request_for_harvest_SUSHI_statistics [
            style="dashed"
            shape="box"
        ]
        test_harvest_SUSHI_statistics [
            style="dashed"
            shape="box"
        ]
        test_GET_request_for_upload_non_COUNTER_reports [
            style="dashed"
            shape="box"
        ]
        test_upload_non_COUNTER_reports [
            style="dashed"
            shape="folder"
        ]
    }


    subgraph cluster_test_bp_initialization {
        label="tests.test_bp_initialization"
        penwidth=5
        style="dashed"
        color="#782f40"

        blank_annualUsageCollectionTracking_data_types [
            style="dotted"
            shape="box"
        ]
        create_fiscalYears_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_annualStatistics_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_vendors_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_vendorNotes_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_statisticsSources_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_statisticsSourceNotes_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_resourceSources_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_resourceSourceNotes_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_statisticsResourceSources_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_blank_annualUsageCollectionTracking_CSV_file [
            style="dotted"
            shape="box"
        ]
        create_annualUsageCollectionTracking_CSV_file [
            style="dotted"
            shape="box"
        ]
        test_GET_request_for_collect_FY_and_vendor_data [
            style="dashed"
            shape="box"
        ]
        test_collect_FY_and_vendor_data [
            style="dashed"
            shape="box"
        ]
        test_collect_sources_data [
            style="dashed"
            shape="box"
        ]
        test_GET_request_for_collect_AUCT_and_historical_COUNTER_data [
            style="dashed"
            shape="box"
        ]
        test_collect_AUCT_and_historical_COUNTER_data [
            style="dashed"
            shape="box"
        ]
        test_GET_request_for_upload_historical_non_COUNTER_usage [
            style="dashed"
            shape="box"
        ]
        files_for_test_upload_historical_non_COUNTER_usage [
            style="dotted"
            shape="folder"
        ]
        "files_for_test_upload_historical_non_COUNTER_usage._files_for_test_upload_historical_non_COUNTER_usage" [
            style="dotted"
            shape="box"
        ]
        test_upload_historical_non_COUNTER_usage [
            style="dashed"
            shape="folder"
        ]
    }


    subgraph cluster_test_bp_login {
        label="tests.test_bp_login"
        penwidth=5
        style="dashed"
        color="#782f40"

        test_login_homepage [
            style="dashed"
            shape="box"
        ]
        test_logging_in [
            style="dashed"
            shape="box"
        ]
        test_logging_in_as_admin [
            style="dashed"
            shape="box"
        ]
        test_creating_an_account [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_bp_view_lists {
        label="tests.test_bp_view_lists"
        penwidth=5
        style="dashed"
        color="#782f40"

        test_view_lists_homepage [
            style="dashed"
            shape="box"
        ]
        test_GET_request_for_view_list_record [
            style="dashed"
            shape="box"
        ]
        test_view_list_record [
            style="dashed"
            shape="box"
        ]
        test_GET_request_for_edit_list_record_for_existing_record [
            style="dashed"
            shape="box"
        ]
        test_GET_request_for_edit_list_record_for_new_record [
            style="dashed"
            shape="box"
        ]
        test_edit_list_record [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_bp_view_usage {
        label="tests.test_bp_view_usage"
        penwidth=5
        style="dashed"
        color="#782f40"

        COUNTER_download_CSV [
            style="dotted"
            shape="box"
        ]
        test_create_COUNTER_fixed_vocab_list [
            style="dashed"
            shape="box"
        ]
        test_set_encoding [
            style="dashed"
            shape="box"
        ]
        test_view_usage_homepage [
            style="dashed"
            shape="box"
        ]
        test_run_custom_SQL_query [
            style="dashed"
            shape="box"
        ]
        test_use_predefined_SQL_query [
            style="dashed"
            shape="box"
        ]
        start_query_wizard_form_data [
            style="dotted"
            shape="box"
        ]
        test_start_query_wizard [
            style="dashed"
            shape="box"
        ]
        test_GET_query_wizard_sort_redirect [
            style="dashed"
            shape="box"
        ]
        PR_parameters [
            style="dotted"
            shape="box"
        ]
        test_construct_PR_query_with_wizard [
            style="dashed"
            shape="box"
        ]
        DR_parameters [
            style="dotted"
            shape="box"
        ]
        test_construct_DR_query_with_wizard [
            style="dashed"
            shape="box"
        ]
        TR_parameters [
            style="dotted"
            shape="box"
        ]
        test_construct_TR_query_with_wizard [
            style="dashed"
            shape="box"
        ]
        IR_parameters [
            style="dotted"
            shape="box"
        ]
        test_construct_IR_query_with_wizard [
            style="dashed"
            shape="box"
        ]
        construct_PR_query_with_wizard_without_string_match [
            style="dashed"
            shape="box"
        ]
        test_GET_request_for_download_non_COUNTER_usage [
            style="dashed"
            shape="box"
        ]
        test_download_non_COUNTER_usage [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_ConvertJSONDictToDataframe {
        label="tests.test_ConvertJSONDictToDataframe"
        penwidth=5
        style="dashed"

        sample_SUSHI_PR_response_R5_JSON_dict [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_PR_response_R5_dataframe [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_DR_response_R5_JSON_dict [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_DR_response_R5_dataframe [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_TR_response_R5_JSON_dict [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_TR_response_R5_dataframe [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_IR_response_R5_JSON_dict [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_IR_response_R5_dataframe [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_PR_response_R5b1_JSON_dict [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_PR_response_R5b1_dataframe [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_DR_response_R5b1_JSON_dict [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_DR_response_R5b1_dataframe [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_TR_response_R5b1_JSON_dict [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_TR_response_R5b1_dataframe [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_IR_response_R5b1_JSON_dict [
            style="dotted"
            shape="box"
        ]
        sample_SUSHI_IR_response_R5b1_dataframe [
            style="dotted"
            shape="box"
        ]
        test_create_dataframe_from_R5_PR [
            style="dashed"
            shape="box"
        ]
        test_create_dataframe_from_R5_DR [
            style="dashed"
            shape="box"
        ]
        test_create_dataframe_from_R5_TR [
            style="dashed"
            shape="box"
        ]
        test_create_dataframe_from_R5_IR [
            style="dashed"
            shape="box"
        ]
        test_create_dataframe_from_R5b1_PR [
            style="dashed"
            shape="box"
        ]
        test_create_dataframe_from_R5b1_DR [
            style="dashed"
            shape="box"
        ]
        test_create_dataframe_from_R5b1_TR [
            style="dashed"
            shape="box"
        ]
        test_create_dataframe_from_R5b1_IR [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_FiscalYears {
        label="tests.test_FiscalYears"
        penwidth=5
        style="dashed"
        color="#ceb888"

        FY2020_FiscalYears_object [
            style="dotted"
            shape="box"
        ]
        test_calculate_depreciated_ACRL_60b [
            style="dashed"
            shape="box"
        ]
        test_calculate_depreciated_ACRL_63 [
            style="dashed"
            shape="box"
        ]
        test_calculate_ACRL_61a [
            style="dashed"
            shape="box"
        ]
        test_calculate_ACRL_61b [
            style="dashed"
            shape="box"
        ]
        test_calculate_ARL_18 [
            style="dashed"
            shape="box"
        ]
        test_calculate_ARL_19 [
            style="dashed"
            shape="box"
        ]
        test_calculate_ARL_20 [
            style="dashed"
            shape="box"
        ]
        FY2023_FiscalYears_object_and_record [
            style="dotted"
            shape="box"
        ]
        load_new_record_into_fiscalYears [
            style="dotted"
            shape="box"
        ]
        test_create_usage_tracking_records_for_fiscal_year [
            style="dashed"
            shape="box"
        ]
        FY2022_FiscalYears_object [
            style="dotted"
            shape="box"
        ]
        test_collect_fiscal_year_usage_statistics [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_ResourceSources {
        label="tests.test_ResourceSources"
        penwidth=5
        style="dashed"
        color="#ceb888"

        test_add_access_stop_date [
            style="dashed"
            shape="box"
        ]
        test_remove_access_stop_date [
            style="dashed"
            shape="box"
        ]
        test_change_StatisticsSource [
            style="dashed"
            shape="box"
        ]
        test_add_note_in_test_ResourceSources [
            label="test_add_note"
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_statements {
        label="tests.test_statements"
        penwidth=5
        style="dashed"
        color="#5cb8b2"

        test_format_list_for_stdout_with_list [
            style="dashed"
            shape="box"
        ]
        test_format_list_for_stdout_with_generator [
            style="dashed"
            shape="box"
        ]
        test_remove_IDE_spacing_from_statement [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_StatisticsSources {
        label="tests.test_StatisticsSources"
        penwidth=5
        style="dashed"
        color="#ceb888"

        current_month_like_most_recent_month_with_usage [
            style="dotted"
            shape="box"
        ]
        StatisticsSources_fixture [
            style="dotted"
            shape="box"
        ]
        test_fetch_SUSHI_information_for_API [
            style="dashed"
            shape="box"
        ]
        test_fetch_SUSHI_information_for_display [
            style="dashed"
            shape="box"
        ]
        SUSHI_credentials_fixture_in_test_StatisticsSources [
            label="SUSHI_credentials_fixture"
            style="dotted"
            shape="box"
        ]
        reports_offered_by_StatisticsSource_fixture [
            style="dotted"
            shape="box"
        ]
        test_COUNTER_reports_offered_by_statistics_source [
            style="dashed"
            shape="box"
        ]
        test_check_if_data_in_database_no [
            style="dashed"
            shape="box"
        ]
        test_check_if_data_in_database_yes [
            style="dashed"
            shape="box"
        ]
        test_harvest_single_report [
            style="dashed"
            shape="box"
        ]
        test_harvest_single_report_with_partial_date_range [
            style="dashed"
            shape="box"
        ]
        test_harvest_R5_SUSHI [
            style="dashed"
            shape="box"
        ]
        test_harvest_R5_SUSHI_with_report_to_harvest [
            style="dashed"
            shape="box"
        ]
        test_harvest_R5_SUSHI_with_invalid_dates [
            style="dashed"
            shape="box"
        ]
        month_before_month_like_most_recent_month_with_usage [
            style="dotted"
            shape="box"
        ]
        harvest_R5_SUSHI_result_in_test_StatisticsSources [
            label="harvest_R5_SUSHI_result"
            style="dotted"
            shape="box"
        ]
        test_collect_usage_statistics [
            style="dashed"
            shape="box"
        ]
        test_add_note_in_test_StatisticsSources [
            label="test_add_note"
            style="dashed"
            shape="box"
        ]
        partially_duplicate_COUNTER_data [
            style="dotted"
            shape="box"
        ]
        non_duplicate_COUNTER_data [
            style="dotted"
            shape="box"
        ]
        test_check_if_data_already_in_COUNTERData [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_SUSHICallAndResponse {
        label="tests.test_SUSHICallAndResponse"
        penwidth=5
        style="dashed"

        SUSHI_credentials_fixture_in_test_SUSHICallAndResponse [
            label="SUSHI_credentials_fixture"
            style="dotted"
            shape="box"
        ]
        StatisticsSource_instance_name [
            style="dotted"
            shape="box"
        ]
        test_status_call [
            style="dashed"
            shape="box"
        ]
        test_status_call_validity [
            style="dashed"
            shape="box"
        ]
        test_reports_call [
            style="dashed"
            shape="box"
        ]
        test_reports_call_validity [
            style="dashed"
            shape="box"
        ]
        list_of_reports [
            style="dotted"
            shape="box"
        ]
        test_PR_call_validity [
            style="dashed"
            shape="box"
        ]
        test_DR_call_validity [
            style="dashed"
            shape="box"
        ]
        test_TR_call_validity [
            style="dashed"
            shape="box"
        ]
        test_IR_call_validity [
            style="dashed"
            shape="box"
        ]
        test_call_with_invalid_credentials [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_UploadCOUNTERReports {
        label="tests.test_UploadCOUNTERReports"
        penwidth=5
        style="dashed"

        sample_COUNTER_report_workbook [
            style="dotted"
            shape="box"
        ]
        test_create_dataframe_from_single_workbook [
            style="dashed"
            shape="box"
        ]
        sample_COUNTER_report_workbooks [
            style="dotted"
            shape="box"
        ]
        test_create_dataframe [
            style="dashed"
            shape="box"
        ]
    }


    subgraph cluster_test_Vendors {
        label="tests.test_Vendors"
        penwidth=5
        style="dashed"
        color="#ceb888"

        test_get_statisticsSources_records [
            style="dashed"
            shape="box"
        ]
        test_get_resourceSources_records [
            style="dashed"
            shape="box"
        ]
        test_add_note_in_test_Vendors [
            label="test_add_note"
            style="dashed"
            shape="box"
        ]
    }
}